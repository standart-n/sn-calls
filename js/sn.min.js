(function($){var methods={init:function(options){return options||(options={}),def={bonus:{inputText:"Введите номер карты"},content:{},result:{}},$.extend(!0,def,options),this.each(function(){$(this).data("sn",def),$(this).snTriggers(),$(this).snEvents({href:"#autoload"})})}};$.fn.sn=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}})(jQuery),function($){var methods={init:function(){return this.each(function(){})},sendRequest:function(options){options||(options={});var def={type:"json",debug:!1,action:"submit",src:$("#src").val(),dst:$("#dst").val(),date1:$("#date1").val(),date2:$("#date2").val()};$.extend(!0,def,options),def.debug&&(def.type="text");var sn=$(this).data("sn");$.ajax({url:"index.php",type:"POST",data:{action:def.action,src:def.src,dst:def.dst,date1:def.date1,date2:def.date2},dataType:def.type,timeout:1e4,beforeSend:function(){$("#loading").show()},success:function(s){"object"==typeof s?$.extend(!0,sn.result,s):(def.debug&&alert(s),sn.result=s),$(this).data("sn",sn),"object"==typeof sn.result&&(sn.result.alert&&alert(sn.result.alert),sn.result.callback&&$(this).snEvents({href:"#"+sn.result.callback})),$("#loading").hide()},error:function(){$("#loading").hide()}})}};$.fn.snAjax=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(){$(this).snPlayer("onClickPlay")},onScrollWindow:function(){var th=$(this);$(window).scroll(function(){th.snPlayer("fixPlayer")})},onClickPlay:function(){$("a.play").click(function(e){e.preventDefault();var id=$(this).data("id"),src=$(this).data("src");$("#player-wrap").show(),$("#player").html("<audio/>").data("id",id),audiojs.events.ready(function(){var a=audiojs.createAll({}),audio=a[0];audio.load(src),audio.play()})})},fixPlayer:function(){$("#player-wrap").css({top:window.pageYOffset+$(window).height()-36+"px"})}};$.fn.snPlayer=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(){return this.each(function(){$(this).snConf("main")})},main:function(){var sn=$(this).data("sn");$.ajax({url:"sn-project/settings/main.json",async:!1,dataType:"json",success:function(s){$.extend(!0,sn,s),$(this).data("sn",sn)}})}};$.fn.snConf=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(options){return this.each(function(){var def={href:"none"};$.extend(!0,def,options);var sn=$(this).data("sn"),href=def.href;switch(href.replace(/(.*)#(.*)/,"$2")){case"autoload":$("#dp1").datepicker(),$("#dp2").datepicker(),$(this).snPlayer();break;case"submit":$(this).snAjax("sendRequest",{action:"submit",debug:!1});break;case"afterSubmit":sn.result&&($(this).snPlayer("onClickPlay"),sn.result.table&&$("#table").html(sn.result.table),sn.result.stat&&$("#stat").html(sn.result.stat));break;case"close":$(this).hide()}})}};$.fn.snEvents=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(){$(this).snTriggers("eventLinks")},eventLinks:function(){th=$(this),sn=$(this).data("sn"),$("a.event").on("click",function(){th.snEvents({href:$(this).attr("href")})})}};$.fn.snTriggers=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery);